{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport swal from 'sweetalert2';\nlet UserComponent = class UserComponent {\n  constructor(service, router, coockie) {\n    this.service = service;\n    this.router = router;\n    this.coockie = coockie;\n    this.UserId = localStorage.getItem('idUser');\n    this.NomUser = localStorage.getItem('nomUser');\n    this.cookiebox = false;\n    this.isnavigate = false;\n    this.sideBarOpen = true;\n    this.NumberOfuser = [];\n    this.Lots = [];\n  }\n\n  ngOnInit() {\n    // this.fetchRef_P()\n    this.getUsers();\n    this.getLots();\n    this.Check();\n  }\n\n  sideBarToggler() {\n    this.sideBarOpen = !this.sideBarOpen;\n  }\n\n  Check() {\n    const cheaking = this.coockie.check('data');\n\n    if (cheaking) {\n      this.cookiebox = false;\n    } else {\n      this.cookiebox = true;\n    }\n  }\n\n  Allow() {\n    this.coockie.set('data', this.user.toString(), {\n      expires: 1\n    });\n    this.cookiebox = false;\n  }\n\n  Decline() {\n    this.cookiebox = false;\n  }\n\n  Delete() {\n    this.coockie.delete('data');\n  }\n\n  fetchRef_P() {\n    this.getRef_P();\n    setTimeout(() => {\n      if (this.ref == this.RefP && this.etat_P == false) {\n        this.AddTicketTouser();\n        this.service.loading();\n        setTimeout(() => {\n          this.router.navigate(['/roue']);\n        }, 1500);\n      } else {\n        //alert('votre Ref_Participation non valide')\n        swal.fire('Attention', 'votre Ref_Participation non valide', 'warning');\n      }\n    }, 1000);\n  } // public etat:boolean=false;\n\n\n  getRef_P() {\n    try {\n      this.service.get_refParticipation(this.RefP).subscribe(data => {\n        this.testIsvalidTicket = data[\"doc\"];\n        console.log(this.testIsvalidTicket);\n\n        if (this.testIsvalidTicket) {\n          this.ref = data[\"doc\"][\"ref_participation\"];\n          this.user = data[\"doc\"];\n          console.log(this.ref);\n        } else {\n          console.log(\"On a pas trouver votre ref_participation!\");\n        }\n      });\n    } catch (error) {\n      error;\n    }\n  }\n\n  getUsers() {\n    this.service.getUser(this.UserId).subscribe(data => {\n      this.etat_P = data[\"result\"][\"Etat_P\"];\n      this.NumberOfuser = data[\"result\"];\n      console.log(this.etat_P);\n    }, error => {\n      console.log(error);\n    });\n  }\n\n  getLots() {\n    this.service.get_lotS_H(this.UserId).subscribe(data => {\n      this.taille = data[\"result\"];\n\n      if (this.taille) {\n        for (let i = 0; i < this.taille.length - 1; i++) {\n          this.Lots[i] = this.taille[i][\"lots\"][\"description\"];\n        }\n\n        console.log(this.Lots);\n      } else {\n        console.log('Vide');\n      }\n    });\n  }\n\n  AddTicketTouser() {\n    this.service.addticketUser(this.UserId, this.RefP).subscribe(data => {\n      console.log(\"Ticket Set to User\");\n    });\n  }\n\n};\nUserComponent = __decorate([Component({\n  selector: 'app-user',\n  templateUrl: './user.component.html',\n  styleUrls: ['./user.component.less']\n})], UserComponent);\nexport { UserComponent };","map":null,"metadata":{},"sourceType":"module"}