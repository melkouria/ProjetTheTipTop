{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { NgxWheelComponent, TextOrientation, TextAlignment } from 'projects/ngx-wheel/src/public-api';\nimport moment from 'moment';\nimport swal from \"sweetalert2\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/service/service.service\";\nimport * as i3 from \"../../projects/ngx-wheel/src/lib/ngx-wheel.component\";\nexport let RoueComponent = /*#__PURE__*/(() => {\n  class RoueComponent {\n    constructor(route, service) {\n      this.route = route;\n      this.service = service;\n      this.max = 70;\n      this.min = 10;\n      this.totalticket = localStorage.getItem('NombreTickets');\n      this.seed = [...Array(5).keys()];\n      this.conteur1 = localStorage.getItem('counter1');\n      this.conteur2 = localStorage.getItem('counter2');\n      this.conteur3 = localStorage.getItem('counter3');\n      this.conteur4 = localStorage.getItem('counter4');\n      this.conteur5 = localStorage.getItem('counter5');\n      this.Gain = localStorage.getItem('Gain');\n      this.conteurTicket = localStorage.getItem('counterTicket');\n      this.Date = localStorage.getItem('Date');\n      this.given = moment(this.Date, \"YYYY-MM-DD\");\n      this.current = moment().startOf('day');\n      this.iswheelcompleted = false;\n      this.textOrientation = TextOrientation.HORIZONTAL;\n      this.textAlignment = TextAlignment.OUTER;\n      this.iscompleted1 = false;\n      this.iscompleted2 = false;\n      this.iscompleted3 = false;\n      this.iscompleted4 = false;\n      this.iscompleted5 = false;\n    } //res:any=(this.totalticket/100)*60;\n    // Add this ⤵️\n\n\n    ngOnInit() {\n      //this.price=Math.round(Math.random() * (this.max - this.min) + this.min);\n      //this.getPrix()\n      this.delay = moment.duration(this.given.diff(this.current)).asDays();\n      console.log(this.delay); //this.service.loading()\n      //console.log(this.users)\n      //console.log()\n\n      this.idToLandOn = this.seed[Math.round(Math.random() * this.seed.length)];\n      const colors = ['#4c7faf', '#FF0000', '#FF8C00', '#9932CC', '#00FF00'];\n      this.items = this.seed.map(value => ({\n        fillStyle: colors[value % 5],\n        text: `Gain ${value}`,\n        id: value,\n        textFillStyle: 'white',\n        textFontSize: '16'\n      }));\n    }\n\n    calculep(p) {\n      if (p == 60) {\n        return this.totalticket / 100 * p;\n      } else if (p == 20) {\n        return this.totalticket / 100 * p;\n      } else if (p == 10) {\n        return this.totalticket / 100 * p;\n      } else if (p == 6) {\n        return this.totalticket / 100 * p;\n      } else if (p == 4) {\n        return this.totalticket / 100 * p;\n      } else {\n        alert('error');\n      }\n    }\n\n    reset() {\n      this.wheel.reset();\n      location.reload(); //this.load1();\n      // this.load2();\n    }\n    /* before() {\r\n       if(this.conteur1<this.calculep(60)){\r\n       alert(`Ta roue est sur le point de tourner`)\r\n    \n       //console.log(this.res)\r\n       }else\r\n       if(this.conteur2<this.calculep(20)){\r\n         alert(`Ta roue est sur le point de tourner`)\r\n         //console.log(this.res)\r\n       }\r\n       else if(this.conteur3<this.calculep(10)){\r\n         alert(`Ta roue est sur le point de tourner`)\r\n         //console.log(this.res)\r\n       }\r\n       else if(this.conteur4<this.calculep(6)){\r\n         alert(`Ta roue est sur le point de tourner`)\r\n         //console.log(this.res)\r\n       }\r\n       else if(this.conteur5<this.calculep(4)){\r\n         alert(`Ta roue est sur le point de tourner`)\r\n         //console.log(this.res)\r\n       }\r\n       else{\r\n         alert(`s'il vous plais rejouer`)\r\n        // console.log(this.totalticket)\r\n       }\r\n     }*/\n\n\n    spin() {\n      return __awaiter(this, void 0, void 0, function* () {\n        if (this.totalticket > this.conteurTicket && this.delay > 0) {\n          if (this.conteur1 < this.calculep(60) && this.idToLandOn == 0) {\n            yield new Promise(resolve => setTimeout(resolve, 0));\n            this.wheel.spin(this.idToLandOn);\n          } else if (this.conteur2 < this.calculep(20) && this.idToLandOn == 1) {\n            yield new Promise(resolve => setTimeout(resolve, 0));\n            this.wheel.spin(this.idToLandOn);\n          } else if (this.conteur3 < this.calculep(10) && this.idToLandOn == 2) {\n            yield new Promise(resolve => setTimeout(resolve, 0));\n            this.wheel.spin(this.idToLandOn);\n          } else if (this.conteur4 < this.calculep(6) && this.idToLandOn == 3) {\n            yield new Promise(resolve => setTimeout(resolve, 0));\n            this.wheel.spin(this.idToLandOn);\n          } else if (this.conteur5 < this.calculep(4) && this.idToLandOn == 4) {\n            yield new Promise(resolve => setTimeout(resolve, 0));\n            this.wheel.spin(this.idToLandOn);\n          } else {\n            alert('ce gain est remporté deja Rejouez à nouveau!');\n            location.reload(); //this.conteur1=0\n            // this.conteur2=0\n            //this.conteur3=0\n            //this.conteur4=0\n            //this.conteur5=0\n          }\n        } else {\n          alert('Session Terminer!');\n        }\n      });\n    }\n\n    redirecttoaction() {\n      this.route.navigateByUrl('celebration', {\n        skipLocationChange: true\n      });\n    }\n\n    save1() {\n      localStorage.setItem('counter1', this.conteur1.toString());\n    }\n\n    save2() {\n      localStorage.setItem('counter2', this.conteur2.toString());\n    }\n\n    save3() {\n      localStorage.setItem('counter3', this.conteur3.toString());\n    }\n\n    save4() {\n      localStorage.setItem('counter4', this.conteur4.toString());\n    }\n\n    save5() {\n      localStorage.setItem('counter5', this.conteur5.toString());\n    }\n\n    svaeGain() {\n      localStorage.setItem('Gain', this.Gain.toString());\n    }\n\n    saveTicketCounter() {\n      localStorage.setItem('counterTicket', this.conteurTicket.toString());\n    }\n\n    after() {\n      // this.service.iscompleted=true;\n      if (this.idToLandOn == 0) {\n        this.service.iscompleted1 = true; //alert('vous avez gagné un infuseur à thé')\n\n        this.Gain = 'un infuseur à thé';\n        this.svaeGain();\n        this.conteur1++;\n        this.conteurTicket++;\n        this.save1();\n        this.saveTicketCounter(); // this.conteur1++;\n        // console.log(this.conteur1);\n\n        swal.fire('Félicitation', 'vous avez gagné un infuseur à thé', 'info').then(v => {\n          if (v.value) {\n            this.redirecttoaction();\n          }\n        });\n      } else // this.service.iscompleted=true\n        if (this.idToLandOn == 1) {\n          this.service.iscompleted2 = true; //alert('vous avez gagné une boite de 100g dun thé détox ou dinfusion')\n\n          this.Gain = 'une boite de 100g dun thé détox ou dinfusion';\n          this.svaeGain();\n          this.conteur2++;\n          this.conteurTicket++;\n          this.save2();\n          this.saveTicketCounter();\n          swal.fire('Félicitation', 'vous avez gagné une boite de 100g dun thé détox ou dinfusion', 'info').then(v => {\n            if (v.value) {\n              this.redirecttoaction();\n            }\n          }); // console.log(this.conteur2 );\n        } else // this.service.iscompleted=true\n          if (this.idToLandOn == 2) {\n            this.service.iscompleted3 = true; //alert('vous avez gagné une boite de 100g dun thé signature')\n\n            this.Gain = 'une boite de 100g dun thé signature';\n            this.svaeGain();\n            this.conteur3++;\n            this.conteurTicket++;\n            this.save3();\n            this.saveTicketCounter(); //  this.save();\n            // console.log(this.conteur3);\n\n            swal.fire('Félicitation', 'vous avez gagné une boite de 100g dun thé signature', 'info').then(v => {\n              if (v.value) {\n                this.redirecttoaction();\n              }\n            });\n          } else //this.service.iscompleted=true\n            if (this.idToLandOn == 3) {\n              this.service.iscompleted4 = true; //alert('vous avez gagné un coffret découverte dune valeur de 39$')\n\n              this.Gain = 'un coffret découverte dune valeur de 39$';\n              this.svaeGain();\n              this.conteur4++;\n              this.conteurTicket++;\n              this.save4();\n              this.saveTicketCounter(); // this.save();\n              //console.log(this.conteur4);\n\n              swal.fire('Félicitation', 'vous avez gagné un coffret découverte dune valeur de 39$', 'info').then(v => {\n                if (v.value) {\n                  this.redirecttoaction();\n                }\n              });\n            } else //this.service.iscompleted=true\n              if (this.idToLandOn == 4) {\n                this.service.iscompleted5 = true; //alert('vous avez gagné un coffret découverte dune valeur de 69$')\n\n                this.Gain = 'un coffret découverte dune valeur de 69$';\n                this.svaeGain(); // this.save();\n\n                this.conteurTicket++;\n                this.conteur5++;\n                this.save5();\n                this.saveTicketCounter(); // console.log(this.conteur5);\n\n                swal.fire('Félicitation', 'vous avez gagné un coffret découverte dune valeur de 69$', 'info').then(v => {\n                  if (v.value) {\n                    this.redirecttoaction();\n                  }\n                });\n              } //this.iswheelcompleted=true;\n\n    }\n\n  }\n\n  RoueComponent.ɵfac = function RoueComponent_Factory(t) {\n    return new (t || RoueComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ServiceService));\n  };\n\n  RoueComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RoueComponent,\n    selectors: [[\"app-roue\"]],\n    viewQuery: function RoueComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(NgxWheelComponent, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.wheel = _t.first);\n      }\n    },\n    decls: 30,\n    vars: 6,\n    consts: [[1, \"center\"], [\"width\", \"400\", \"height\", \"400\", \"spinDuration\", \"8\", \"pointerStrokeColor\", \"red\", \"pointerFillColor\", \"gold\", \"disableSpinOnClick\", \"false\", 3, \"items\", \"innerRadius\", \"spinAmount\", \"textOrientation\", \"textAlignment\", \"idToLandOn\", \"onSpinComplete\"], [\"wheel\", \"\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"version\", \"1.1\"], [\"id\", \"gooey\"], [\"in\", \"SourceGraphic\", \"stdDeviation\", \"5\", \"result\", \"blur\"], [\"in\", \"blur\", \"type\", \"matrix\", \"values\", \"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9\", \"result\", \"highContrastGraphic\"], [\"in\", \"SourceGraphic\", \"in2\", \"highContrastGraphic\", \"operator\", \"atop\"], [\"id\", \"gooey-button\"], [1, \"bubbles\"], [1, \"bubble\"], [3, \"click\"], [1, \"button\", \"button3\"]],\n    template: function RoueComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"html\")(1, \"span\", 0)(2, \"ngx-wheel\", 1, 2);\n        i0.ɵɵlistener(\"onSpinComplete\", function RoueComponent_Template_ngx_wheel_onSpinComplete_2_listener() {\n          return ctx.after();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\");\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(5, \"svg\", 3)(6, \"defs\")(7, \"filter\", 4);\n        i0.ɵɵelement(8, \"feGaussianBlur\", 5)(9, \"feColorMatrix\", 6)(10, \"feComposite\", 7);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(11, \"button\", 8);\n        i0.ɵɵtext(12, \" F*** Awesome \");\n        i0.ɵɵelementStart(13, \"span\", 9);\n        i0.ɵɵelement(14, \"span\", 10)(15, \"span\", 10)(16, \"span\", 10)(17, \"span\", 10)(18, \"span\", 10)(19, \"span\", 10)(20, \"span\", 10)(21, \"span\", 10)(22, \"span\", 10)(23, \"span\", 10);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(24, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function RoueComponent_Template_button_click_24_listener() {\n          return ctx.reset();\n        });\n        i0.ɵɵtext(25, \"R\\u00E9nitialiser\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"div\", 12)(27, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function RoueComponent_Template_button_click_27_listener() {\n          return ctx.spin();\n        });\n        i0.ɵɵtext(28, \"jouer\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelement(29, \"router-outlet\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"items\", ctx.items)(\"innerRadius\", 20)(\"spinAmount\", 10)(\"textOrientation\", ctx.textOrientation)(\"textAlignment\", ctx.textAlignment)(\"idToLandOn\", ctx.idToLandOn);\n      }\n    },\n    dependencies: [i3.NgxWheelComponent, i1.RouterOutlet],\n    styles: [\"html[_ngcontent-%COMP%]{margin:0;height:0;min-height:99vh;min-width:237vh;background:url(f.jpeg) no-repeat center center fixed;background-size:cover}.center[_ngcontent-%COMP%]{display:flex;justify-content:center}*[_ngcontent-%COMP%]{box-sizing:border-box}svg[_ngcontent-%COMP%]{position:absolute;top:-4000px;left:-4000px}#gooey-button[_ngcontent-%COMP%]{padding:1rem;font-size:2rem;border:none;color:#0c1016;filter:url(#gooey);position:relative;background-color:#00ff80}#gooey-button[_ngcontent-%COMP%]:focus{outline:none}#gooey-button[_ngcontent-%COMP%]   .bubbles[_ngcontent-%COMP%]{position:absolute;inset:0}#gooey-button[_ngcontent-%COMP%]   .bubbles[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]{background-color:#00ff80;border-radius:100%;position:absolute;top:0;left:0;display:block;z-index:-1}#gooey-button[_ngcontent-%COMP%]   .bubbles[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]:nth-child(1){left:68px;width:25px;height:25px;animation:move-1 3.02s infinite;animation-delay:.2s}#gooey-button[_ngcontent-%COMP%]   .bubbles[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]:nth-child(2){left:27px;width:25px;height:25px;animation:move-2 3.04s infinite;animation-delay:.4s}#gooey-button[_ngcontent-%COMP%]   .bubbles[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]:nth-child(3){left:98px;width:25px;height:25px;animation:move-3 3.06s infinite;animation-delay:.6s}#gooey-button[_ngcontent-%COMP%]   .bubbles[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]:nth-child(4){left:91px;width:25px;height:25px;animation:move-4 3.08s infinite;animation-delay:.8s}#gooey-button[_ngcontent-%COMP%]   .bubbles[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]:nth-child(5){left:14px;width:25px;height:25px;animation:move-5 3.1s infinite;animation-delay:1s}#gooey-button[_ngcontent-%COMP%]   .bubbles[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]:nth-child(6){left:44px;width:25px;height:25px;animation:move-6 3.12s infinite;animation-delay:1.2s}#gooey-button[_ngcontent-%COMP%]   .bubbles[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]:nth-child(7){left:15px;width:25px;height:25px;animation:move-7 3.14s infinite;animation-delay:1.4s}#gooey-button[_ngcontent-%COMP%]   .bubbles[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]:nth-child(8){left:21px;width:25px;height:25px;animation:move-8 3.16s infinite;animation-delay:1.6s}#gooey-button[_ngcontent-%COMP%]   .bubbles[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]:nth-child(9){left:99px;width:25px;height:25px;animation:move-9 3.18s infinite;animation-delay:1.8s}#gooey-button[_ngcontent-%COMP%]   .bubbles[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]:nth-child(10){left:16px;width:25px;height:25px;animation:move-10 3.2s infinite;animation-delay:2s}@keyframes move-1{0%{transform:translate(0)}99%{transform:translateY(-123px)}to{transform:translate(0);opacity:0}}@keyframes move-2{0%{transform:translate(0)}99%{transform:translateY(-97px)}to{transform:translate(0);opacity:0}}@keyframes move-3{0%{transform:translate(0)}99%{transform:translateY(-96px)}to{transform:translate(0);opacity:0}}@keyframes move-4{0%{transform:translate(0)}99%{transform:translateY(-92px)}to{transform:translate(0);opacity:0}}@keyframes move-5{0%{transform:translate(0)}99%{transform:translateY(-89px)}to{transform:translate(0);opacity:0}}@keyframes move-6{0%{transform:translate(0)}99%{transform:translateY(-89px)}to{transform:translate(0);opacity:0}}@keyframes move-7{0%{transform:translate(0)}99%{transform:translateY(-65px)}to{transform:translate(0);opacity:0}}@keyframes move-8{0%{transform:translate(0)}99%{transform:translateY(-75px)}to{transform:translate(0);opacity:0}}@keyframes move-9{0%{transform:translate(0)}99%{transform:translateY(-54px)}to{transform:translate(0);opacity:0}}@keyframes move-10{0%{transform:translate(0)}99%{transform:translateY(-95px)}to{transform:translate(0);opacity:0}}\"]\n  });\n  return RoueComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}